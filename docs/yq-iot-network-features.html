<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>关于IoT网络的一些特征的探讨 · AliOS-Things</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="网络是IoT设备非常关键的部分,本文和大家一起探讨IoT网络的几个重要特征，及AliOS Things尝试提供的一些解决方案。"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="关于IoT网络的一些特征的探讨 · AliOS-Things"/><meta property="og:type" content="website"/><meta property="og:url" content="https://your-docusaurus-test-site.com/index.html"/><meta property="og:description" content="网络是IoT设备非常关键的部分,本文和大家一起探讨IoT网络的几个重要特征，及AliOS Things尝试提供的一些解决方案。"/><meta property="og:image" content="https://your-docusaurus-test-site.com/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://your-docusaurus-test-site.com/img/docusaurus.png"/><link rel="shortcut icon" href="/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><h2 class="headerTitle">AliOS-Things</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/quickstart" target="_self">Docs</a></li><li class=""><a href="/docs/quickstart" target="_self">FAQ</a></li><li class=""><a href="/docs/contributors" target="_self">Contributors</a></li><li class=""><a href="/help" target="_self">Help</a></li><li class=""><a href="https://github.com/alibaba/AliOS-Things" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docMainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">关于IoT网络的一些特征的探讨</h1></header><article><div><span><p>网络是IoT设备非常关键的部分,本文和大家一起探讨IoT网络的几个重要特征，及AliOS Things尝试提供的一些解决方案。
<br></p>
<h2><a class="anchor" aria-hidden="true" id="ip网络"></a><a href="#ip网络" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IP网络</h2>
<p><img src="https://img.alicdn.com/tfs/TB1DUoUjY_I8KJjy1XaXXbsxpXa-640-640.jpg" alt="图1 互联网全球连接快照图"></p>
<p>今天是一个多样化的时代，不管什么技术都有多种标准存在，明争暗斗，每个人都有自己的小算盘，想要形成一个大一统的标准非常困难。从这个角度来说，IP网络的存在是个奇迹。IP网络真正做到了无种族，无国界，即插即用。IP网络可以为万物互联提供一个很好的基础。这种趋势也越来越明显，Zigbee推出了Zigbee IP，而谷歌也推出了同样基于802.15.4的Thread，Silicon Labs，TI等Zigbee核心厂商也纷纷支持（谷歌收购的Nest所使用的Thread是Silicon Labs开发的）。</p>
<p>IP网络还能给物联网带来几个明显的好处：</p>
<ul>
<li>IP之上有大量成熟的软件栈，比如安全组件TLS/DTLS</li>
<li>IPv6能提供足够多的地址空间</li>
<li>大量熟悉socket的软件开发人员</li>
</ul>
<p>当然IP只是提供了一个通道，还需要有上层的协议来做保证“彼此听得懂”，现在比较流行的有阿里云的ICA联盟，OCF，Google Weave，HomeKit的存在，这个话题在此不展开。
<br></p>
<h2><a class="anchor" aria-hidden="true" id="udp网络"></a><a href="#udp网络" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>UDP网络</h2>
<p>IP之上主要的两个传输层协议：TCP和UDP。应该说，目前为止，TCP都是碾压UDP的，一般听到的都是TCP/IP，几乎没听过UDP/IP。</p>
<p>TCP是一种面向连接的，可靠的，基于字节流的传输层协议。TCP的保活/重传/拥塞控制提供了一个很好的性能/健壮性折衷，对网络环境较好，实时性要求不高的应用来说，比如Web时代最流行的HTTP，TCP是非常好的选择。但是慢慢开始有人觉得TCP做得太多了，TCP的握手协议成为很多的Web API的性能的瓶颈，比如谷歌提出了QUIC（Quick UDP Internet Connection）试图通过UDP来进一步提高用户的网络体验。</p>
<p>在物联网，TCP的问题就更突出了，因为物联网环境经常面临网络信号不好，带宽有限，功耗苛刻。最近风头正劲的NB-IoT就是一个典型的例子。大多数NB-IOT的终端设备工作在电池环境下，传输速率较低，应用场景多种多样。TCP的面向连接，超时重传机制消耗更多的内存，同时也影响了功耗。</p>
<p>设想一下常见的传感器定时上传数据的场景：采集数据，上报数据，睡眠。因为定时上报，很多情况下，偶尔丢失数据是可以接受的。但是TCP为了提高数据到达率，其保活和重传机制会降低电池寿命，同时重传机制会消耗内存。</p>
<p>目前主流的云端通道协议还是基于TCP，主要是MQTT，包括阿里云IoT套件，Amazon，Azure。而<a href="https://help.aliyun.com/document_detail/57697.html?spm=5176.100239.blogcont309562.12.vn0LZB">阿里云IoT套件</a>也支持CoAP，Google Weave也主要采用了UDP作为通信手段。
<br></p>
<h2><a class="anchor" aria-hidden="true" id="多种通信技术并存"></a><a href="#多种通信技术并存" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>多种通信技术并存</h2>
<p>不同的通信技术，其速率，覆盖范围，可靠性，功耗，部署，成本都是不同的，没有一种技术能包治百病。3G/4G网络在覆盖范围上优于WiFi，但是在速率，功耗，成本上又不如WiFi。WiFi在速率上秒杀BLE，但是功耗又被BLE秒杀。</p>
<p>物联网领域，LPWA（Low Power Wide Area）技术NB-IoT，LoRa，SigFox受到广泛关注，其低功耗广覆盖的特点，简化了各种复杂环境下的部署。基于802.15.4的WSN(Wireless Sensor Network)[3]技术Zigbee，Wi-Sun，在功耗和成本优势明显，适合大规模部署。</p>
<p>WiFi/BLE在消费电子类的普及度，其应用受到广泛关注。WiFi由于不需要网关，受到各种家电厂商的青睐（但是家里的智能设备越来越多时，AP的连接数将成为瓶颈）。同时，面向物联网WiFi联盟于2016年推出了WiFi的低功耗版本，802.11ah（Wi-Fi HaLow）[4]。BLE随着5.0的推出，更快的速率，更大的mtu，除了提高现有的点到点通信体验，基于BLE构建WSN也变得可能，对Zigbee等现有技术构成了威胁。</p>
<p><img src="https://img.alicdn.com/tfs/TB1jGj9j9_I8KJjy0FoXXaFnVXa-554-262.png" alt="图3 一种典型的WSN架构">
<br></p>
<h2><a class="anchor" aria-hidden="true" id="多种连接方式及网络拓扑并存"></a><a href="#多种连接方式及网络拓扑并存" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>多种连接方式及网络拓扑并存</h2>
<p>下图是常见的网络拓扑：
<img src="https://img.alicdn.com/tfs/TB1Zvp2hOqAXuNjy1XdXXaYcVXa-406-199.png" alt="图2 网络拓扑"></p>
<p>图1 互联网全球连接快照图，可以隐约看出一棵棵树的存在。在以太网中，Tree和Bus较为常见，有线局域网内部是一个Bus拓扑，但是从访问互联网的角度，需要经过网关，网关就成为了树的根节点，所以也是一种Tree拓扑。而在无线局域网中，WiFi是Star拓扑，WSN以Tree/Mesh为主。在广域网包括LPWA，可以看作以基站为主的Star拓扑，基站之间则是Mesh拓扑。</p>
<p>在现有的以太网构成的骨干网基础上，在物联网中相信WSN/LPWA会有越来越多的应用。WSN的低成本低功耗，配合LPWA的低功耗广覆盖，可以覆盖非常广的物联网场景。
<br></p>
<h2><a class="anchor" aria-hidden="true" id="alios-things的网络特性"></a><a href="#alios-things的网络特性" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AliOS Things的网络特性</h2>
<p>针对上述的特点，AliOS Things从多个纬度提供相应的组件以更好的支持IoT设备的网络需求。除了基于LwIP2.0高度优化的协议栈外，还提供了以下丰富的组件：</p>
<h3><a class="anchor" aria-hidden="true" id="基于coap的全链路优化"></a><a href="#基于coap的全链路优化" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>基于CoAP的全链路优化</h3>
<p>AliOS Things支持基于CoAP的上云通道（比如阿里云IoT套件），同时支持基于CoAP的FOTA，使得构建一个全UDP的系统成为可能。关于AliOS Things上的CoAP支持的进一步信息可以参考：<a href="https://yq.aliyun.com/articles/309562">AliOS Things全链路优化-CoAP FOTA</a>。</p>
<p><img src="https://img.alicdn.com/tfs/TB1MpWUj8fH8KJjy1XbXXbLdXXa-655-332.png" alt=""></p>
<h3><a class="anchor" aria-hidden="true" id="sal网络适配层"></a><a href="#sal网络适配层" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SAL网络适配层</h3>
<p>在IoT设备上MCU外挂通信模块非常常见，而MCU和通信模块之间的通信方式也多种多样，为了降低复杂度，经常是通信模块上跑了完整的TCP/IP协议栈，而MCU通过AT或者私有协议去控制。针对这种情况，AliOS Things通过SAL组件，对上层提供标准socket接口，对下则可以基于SAL device适配私有协议。对于常见的AT模块，AT Parser进一步降低了对接的复杂度。进一步信息参考：<a href="https://yq.aliyun.com/articles/292612?spm=5176.100239.0.0.ndirf0">AliOS Things网络适配框架 - SAL</a>。</p>
<h3><a class="anchor" aria-hidden="true" id="umesh"></a><a href="#umesh" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>uMesh</h3>
<p>uMesh是无线协议无关的，IP之下，MAC之上的自组织网络协议栈。uMesh是一种Routing Mesh，支持树状拓扑和网状拓扑，树状拓扑下采用结构化地址路由，极大的减少了路由表大小。uMesh可以无缝和TCPIP协议栈对接，从而使得各类资源受限的无线设备可以简单的接入IP网络。uMesh是AliOS Things为复杂网络设计的，解决最后一公里通信问题的技术。</p>
<h2><a class="anchor" aria-hidden="true" id="总结"></a><a href="#总结" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>总结</h2>
<p>本文探讨了IoT网络的一些特征，及AliOS Things的一些相应特性，欢迎访问AliOS Things github官网：<a href="https://github.com/alibaba/AliOS-Things">https://github.com/alibaba/AliOS-Things</a>，和我们一起构建一个更好的面向物联网的操作系统。
<br></p>
<h2><a class="anchor" aria-hidden="true" id="引用"></a><a href="#引用" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>引用</h2>
<p>[1]<a href="https://en.wikipedia.org/wiki/Computer_network">Computer Network</a>
[2]<a href="https://en.wikipedia.org/wiki/Network_topology">Network Topology</a>
[3]<a href="https://en.wikipedia.org/wiki/Wireless_sensor_network">WSN</a>
[4]<a href="https://en.wikipedia.org/wiki/IEEE_802.11ah">802.11ah</a>
[5]<a href="http://www.embedded.com/design/real-world-applications/4426378/Speed-up-machine-to-machine-networking-with-UDP">M2M with UDP</a></p>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav docOnPageNav"><ul class="toc-headings"><li><a href="#ip网络">IP网络</a></li><li><a href="#udp网络">UDP网络</a></li><li><a href="#多种通信技术并存">多种通信技术并存</a></li><li><a href="#多种连接方式及网络拓扑并存">多种连接方式及网络拓扑并存</a></li><li><a href="#alios-things的网络特性">AliOS Things的网络特性</a><ul class="toc-headings"><li><a href="#基于coap的全链路优化">基于CoAP的全链路优化</a></li><li><a href="#sal网络适配层">SAL网络适配层</a></li><li><a href="#umesh">uMesh</a></li></ul></li><li><a href="#总结">总结</a></li><li><a href="#引用">引用</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/docs/Getting-Started" style="margin:20px"><img src="/img/logo.png" alt="AliOS-Things" width="100"/></a><div><h5>Docs</h5><a href="/docs/en/Getting-Started.html">Getting Started</a><a href="/docs/en/Linkkit-Tutorial.html">Guides</a><a href="/docs/en/api-reference/AliOS-Things-API-Guide.html">API Reference</a></div><div><h5>Community</h5><a href="/en/users.html">dingding</a><a href="http://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">WebChart</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Yunqi</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2018 AliOS-Things</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                
                apiKey: 'my-api-key',
                indexName: 'my-index-name',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>