<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>api-reference/AliOS-Things-API-HAL-SOC-FLASH-Guide · AliOS-Things</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# API INDEX"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="api-reference/AliOS-Things-API-HAL-SOC-FLASH-Guide · AliOS-Things"/><meta property="og:type" content="website"/><meta property="og:url" content="https://your-docusaurus-test-site.com/index.html"/><meta property="og:description" content="# API INDEX"/><meta property="og:image" content="https://your-docusaurus-test-site.com/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://your-docusaurus-test-site.com/img/docusaurus.png"/><link rel="shortcut icon" href="/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><h2 class="headerTitle">AliOS-Things</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/quickstart" target="_self">Docs</a></li><li class=""><a href="/docs/quickstart" target="_self">FAQ</a></li><li class=""><a href="/docs/contributors" target="_self">Contributors</a></li><li class=""><a href="/help" target="_self">Help</a></li><li class=""><a href="https://github.com/alibaba/AliOS-Things" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docMainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">api-reference/AliOS-Things-API-HAL-SOC-FLASH-Guide</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="api-index"></a><a href="#api-index" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>API INDEX</h1>
<ul>
<li><a href="#1-hal_flash_get_info">1 hal_flash_get_info</a></li>
<li><a href="#2-hal_flash_erase">2 hal_flash_erase</a></li>
<li><a href="#3-hal_flash_write">3 hal_flash_write</a></li>
<li><a href="#4-hal_flash_erase_write">4 hal_flash_erase_write</a></li>
<li><a href="#5-hal_flash_read">5 hal_flash_read</a></li>
<li><a href="#6-hal_flash_enable_secure">6 hal_flash_enable_secure</a></li>
<li><a href="#7-hal_flash_dis_secure">7 hal_flash_dis_secure</a></li>
</ul>
<hr>
<h2><a class="anchor" aria-hidden="true" id="1-hal-flash-get-info"></a><a href="#1-hal-flash-get-info" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1-hal_flash_get_info</h2>
<pre><code class="hljs css language-c"><span class="hljs-keyword">hal_logic_partition_t</span> *hal_flash_get_info(<span class="hljs-keyword">hal_partition_t</span> in_partition)
</code></pre>
<ul>
<li><p>[x] <strong>Description</strong></p>
<p>Get the infomation of the specified flash area</p></li>
<li><p>[x] <strong>Parameters</strong></p>
<table>
<thead>
<tr><th>IN/OUT</th><th>NAME</th><th>DESC</th></tr>
</thead>
<tbody>
<tr><td>[in]</td><td>in_partition</td><td>The target flash logical partition which should be erased</td></tr>
</tbody>
</table>
</li>
<li><p>[x] <strong>Returns</strong></p>
<p>HAL_logi_partition struct</p></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="2-hal-flash-erase"></a><a href="#2-hal-flash-erase" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2-hal_flash_erase</h2>
<pre><code class="hljs css language-c"><span class="hljs-keyword">int32_t</span> hal_flash_erase(<span class="hljs-keyword">hal_partition_t</span> in_partition, <span class="hljs-keyword">uint32_t</span> off_set, <span class="hljs-keyword">uint32_t</span> size)
</code></pre>
<ul>
<li><p>[x] <strong>Description</strong></p>
<p>Erase an area on a Flash logical partition</p></li>
<li><p>[x] <strong>Parameters</strong></p>
<table>
<thead>
<tr><th>IN/OUT</th><th>NAME</th><th>DESC</th></tr>
</thead>
<tbody>
<tr><td>[in]</td><td>in_partition</td><td>The target flash logical partition which should be erased</td></tr>
<tr><td>[in]</td><td>off_set</td><td>Start address of the erased flash area</td></tr>
<tr><td>[in]</td><td>size</td><td>Size of the erased flash are</td></tr>
</tbody>
</table>
</li>
<li><p>[x] <strong>Returns</strong></p>
<p>0 : On success, EIO : If an error occurred with any step</p></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="3-hal-flash-write"></a><a href="#3-hal-flash-write" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3-hal_flash_write</h2>
<pre><code class="hljs css language-c"><span class="hljs-keyword">int32_t</span> hal_flash_write(<span class="hljs-keyword">hal_partition_t</span> in_partition, <span class="hljs-keyword">uint32_t</span> *off_set,
                        <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> *in_buf, <span class="hljs-keyword">uint32_t</span> in_buf_len)
</code></pre>
<ul>
<li><p>[x] <strong>Description</strong></p>
<p>Write data to an area on a flash logical partition without erase</p></li>
<li><p>[x] <strong>Parameters</strong></p>
<table>
<thead>
<tr><th>IN/OUT</th><th>NAME</th><th>DESC</th></tr>
</thead>
<tbody>
<tr><td>[in]</td><td>in_partition</td><td>The target flash logical partition which should be read which should be written</td></tr>
<tr><td>[in]</td><td>off_set</td><td>Point to the start address that the data is written to, and        point to the last unwritten address after this function is        returned, so you can call this function serval times without        update this start address.</td></tr>
<tr><td>[in]</td><td>inBuffer</td><td>point to the data buffer that will be written to flash</td></tr>
<tr><td>[in]</td><td>inBufferLength</td><td>The length of the buffe</td></tr>
</tbody>
</table>
</li>
<li><p>[x] <strong>Returns</strong></p>
<p>0 : On success, EIO : If an error occurred with any step</p></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="4-hal-flash-erase-write"></a><a href="#4-hal-flash-erase-write" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4-hal_flash_erase_write</h2>
<pre><code class="hljs css language-c"><span class="hljs-keyword">int32_t</span> hal_flash_erase_write(<span class="hljs-keyword">hal_partition_t</span> in_partition, <span class="hljs-keyword">uint32_t</span> *off_set,
                              <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> *in_buf, <span class="hljs-keyword">uint32_t</span> in_buf_len)
</code></pre>
<ul>
<li><p>[x] <strong>Description</strong></p>
<p>Write data to an area on a flash logical partition with erase first</p></li>
<li><p>[x] <strong>Parameters</strong></p>
<table>
<thead>
<tr><th>IN/OUT</th><th>NAME</th><th>DESC</th></tr>
</thead>
<tbody>
<tr><td>[in]</td><td>in_partition</td><td>The target flash logical partition which should be read which should be written</td></tr>
<tr><td>[in]</td><td>off_set</td><td>Point to the start address that the data is written to, and        point to the last unwritten address after this function is        returned, so you can call this function serval times without        update this start address.</td></tr>
<tr><td>[in]</td><td>inBuffer</td><td>point to the data buffer that will be written to flash</td></tr>
<tr><td>[in]</td><td>inBufferLength</td><td>The length of the buffe</td></tr>
</tbody>
</table>
</li>
<li><p>[x] <strong>Returns</strong></p>
<p>0 : On success, EIO : If an error occurred with any step</p></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="5-hal-flash-read"></a><a href="#5-hal-flash-read" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5-hal_flash_read</h2>
<pre><code class="hljs css language-c"><span class="hljs-keyword">int32_t</span> hal_flash_read(<span class="hljs-keyword">hal_partition_t</span> in_partition, <span class="hljs-keyword">uint32_t</span> *off_set,
                       <span class="hljs-keyword">void</span> *out_buf, <span class="hljs-keyword">uint32_t</span> in_buf_len)
</code></pre>
<ul>
<li><p>[x] <strong>Description</strong></p>
<p>Read data from an area on a Flash to data buffer in RAM</p></li>
<li><p>[x] <strong>Parameters</strong></p>
<table>
<thead>
<tr><th>IN/OUT</th><th>NAME</th><th>DESC</th></tr>
</thead>
<tbody>
<tr><td>[in]</td><td>in_partition</td><td>The target flash logical partition which should be read</td></tr>
<tr><td>[in]</td><td>off_set</td><td>Point to the start address that the data is read, and        point to the last unread address after this function is        returned, so you can call this function serval times without        update this start address.</td></tr>
<tr><td>[in]</td><td>outBuffer</td><td>Point to the data buffer that stores the data read from flash</td></tr>
<tr><td>[in]</td><td>inBufferLength</td><td>The length of the buffe</td></tr>
</tbody>
</table>
</li>
<li><p>[x] <strong>Returns</strong></p>
<p>0 : On success, EIO : If an error occurred with any step</p></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="6-hal-flash-enable-secure"></a><a href="#6-hal-flash-enable-secure" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6-hal_flash_enable_secure</h2>
<pre><code class="hljs css language-c"><span class="hljs-keyword">int32_t</span> hal_flash_enable_secure(<span class="hljs-keyword">hal_partition_t</span> partition, <span class="hljs-keyword">uint32_t</span> off_set, <span class="hljs-keyword">uint32_t</span> size)
</code></pre>
<ul>
<li><p>[x] <strong>Description</strong></p>
<p>Set security options on a logical partition</p></li>
<li><p>[x] <strong>Parameters</strong></p>
<table>
<thead>
<tr><th>IN/OUT</th><th>NAME</th><th>DESC</th></tr>
</thead>
<tbody>
<tr><td>[in]</td><td>partition</td><td>The target flash logical partition</td></tr>
<tr><td>[in]</td><td>offset</td><td>Point to the start address that the data is read, and   point to the last unread address after this function is   returned, so you can call this function serval times without   update this start address.</td></tr>
<tr><td>[in]</td><td>size</td><td>Size of enabled flash are</td></tr>
</tbody>
</table>
</li>
<li><p>[x] <strong>Returns</strong></p>
<p>0 : On success, EIO : If an error occurred with any step</p></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="7-hal-flash-dis-secure"></a><a href="#7-hal-flash-dis-secure" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7-hal_flash_dis_secure</h2>
<pre><code class="hljs css language-c"><span class="hljs-keyword">int32_t</span> hal_flash_dis_secure(<span class="hljs-keyword">hal_partition_t</span> partition, <span class="hljs-keyword">uint32_t</span> off_set, <span class="hljs-keyword">uint32_t</span> size)
</code></pre>
<ul>
<li><p>[x] <strong>Description</strong></p>
<p>Disable security options on a logical partition</p></li>
<li><p>[x] <strong>Parameters</strong></p>
<table>
<thead>
<tr><th>IN/OUT</th><th>NAME</th><th>DESC</th></tr>
</thead>
<tbody>
<tr><td>[in]</td><td>partition</td><td>The target flash logical partition</td></tr>
<tr><td>[in]</td><td>offset</td><td>Point to the start address that the data is read, and   point to the last unread address after this function is   returned, so you can call this function serval times without   update this start address.</td></tr>
<tr><td>[in]</td><td>size</td><td>Size of disabled flash are</td></tr>
</tbody>
</table>
</li>
<li><p>[x] <strong>Returns</strong></p>
<p>0 : On success, EIO : If an error occurred with any step</p></li>
</ul>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav docOnPageNav"><ul class="toc-headings"><li><a href="#1-hal-flash-get-info">1-hal_flash_get_info</a></li><li><a href="#2-hal-flash-erase">2-hal_flash_erase</a></li><li><a href="#3-hal-flash-write">3-hal_flash_write</a></li><li><a href="#4-hal-flash-erase-write">4-hal_flash_erase_write</a></li><li><a href="#5-hal-flash-read">5-hal_flash_read</a></li><li><a href="#6-hal-flash-enable-secure">6-hal_flash_enable_secure</a></li><li><a href="#7-hal-flash-dis-secure">7-hal_flash_dis_secure</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/docs/Getting-Started" style="margin:20px"><img src="/img/logo.png" alt="AliOS-Things" width="100"/></a><div><h5>Docs</h5><a href="/docs/en/Getting-Started.html">Getting Started</a><a href="/docs/en/Linkkit-Tutorial.html">Guides</a><a href="/docs/en/api-reference/AliOS-Things-API-Guide.html">API Reference</a></div><div><h5>Community</h5><a href="/en/users.html">dingding</a><a href="http://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">WebChart</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Yunqi</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2018 AliOS-Things</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                
                apiKey: 'my-api-key',
                indexName: 'my-index-name',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>